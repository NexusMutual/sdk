[
  {
    "type": "constructor",
    "payable": false,
    "inputs": [
      {
        "type": "address",
        "name": "_coverContract"
      },
      {
        "type": "address",
        "name": "_stakingPoolFactory"
      }
    ]
  },
  {
    "type": "error",
    "name": "MustRecalculateEffectiveWeight",
    "inputs": []
  },
  {
    "type": "error",
    "name": "MustSetPriceForNewProducts",
    "inputs": []
  },
  {
    "type": "error",
    "name": "MustSetWeightForNewProducts",
    "inputs": []
  },
  {
    "type": "error",
    "name": "OnlyCoverContract",
    "inputs": []
  },
  {
    "type": "error",
    "name": "OnlyManager",
    "inputs": []
  },
  {
    "type": "error",
    "name": "OnlyStakingPool",
    "inputs": []
  },
  {
    "type": "error",
    "name": "PoolNotAllowedForThisProduct",
    "inputs": []
  },
  {
    "type": "error",
    "name": "RevertedWithoutReason",
    "inputs": [
      {
        "type": "uint256",
        "name": "index"
      }
    ]
  },
  {
    "type": "error",
    "name": "TargetPriceBelowMin",
    "inputs": []
  },
  {
    "type": "error",
    "name": "TargetPriceTooHigh",
    "inputs": []
  },
  {
    "type": "error",
    "name": "TargetWeightTooHigh",
    "inputs": []
  },
  {
    "type": "error",
    "name": "TotalEffectiveWeightExceeded",
    "inputs": []
  },
  {
    "type": "error",
    "name": "TotalTargetWeightExceeded",
    "inputs": []
  },
  {
    "type": "event",
    "anonymous": false,
    "name": "ProductUpdated",
    "inputs": [
      {
        "type": "uint256",
        "name": "productId",
        "indexed": false
      },
      {
        "type": "uint8",
        "name": "targetWeight",
        "indexed": false
      },
      {
        "type": "uint96",
        "name": "targetPrice",
        "indexed": false
      }
    ]
  },
  {
    "type": "function",
    "name": "INITIAL_PRICE_DENOMINATOR",
    "constant": true,
    "stateMutability": "view",
    "payable": false,
    
    "inputs": [],
    "outputs": [
      {
        "type": "uint256"
      }
    ]
  },
  {
    "type": "function",
    "name": "MAX_ACTIVE_TRANCHES",
    "constant": true,
    "stateMutability": "view",
    "payable": false,
    
    "inputs": [],
    "outputs": [
      {
        "type": "uint256"
      }
    ]
  },
  {
    "type": "function",
    "name": "MAX_TOTAL_WEIGHT",
    "constant": true,
    "stateMutability": "view",
    "payable": false,
    
    "inputs": [],
    "outputs": [
      {
        "type": "uint256"
      }
    ]
  },
  {
    "type": "function",
    "name": "PRICE_BUMP_RATIO",
    "constant": true,
    "stateMutability": "view",
    "payable": false,
    
    "inputs": [],
    "outputs": [
      {
        "type": "uint256"
      }
    ]
  },
  {
    "type": "function",
    "name": "PRICE_CHANGE_PER_DAY",
    "constant": true,
    "stateMutability": "view",
    "payable": false,
    
    "inputs": [],
    "outputs": [
      {
        "type": "uint256"
      }
    ]
  },
  {
    "type": "function",
    "name": "SURGE_PRICE_RATIO",
    "constant": true,
    "stateMutability": "view",
    "payable": false,
    
    "inputs": [],
    "outputs": [
      {
        "type": "uint256"
      }
    ]
  },
  {
    "type": "function",
    "name": "SURGE_THRESHOLD_DENOMINATOR",
    "constant": true,
    "stateMutability": "view",
    "payable": false,
    
    "inputs": [],
    "outputs": [
      {
        "type": "uint256"
      }
    ]
  },
  {
    "type": "function",
    "name": "SURGE_THRESHOLD_RATIO",
    "constant": true,
    "stateMutability": "view",
    "payable": false,
    
    "inputs": [],
    "outputs": [
      {
        "type": "uint256"
      }
    ]
  },
  {
    "type": "function",
    "name": "TARGET_PRICE_DENOMINATOR",
    "constant": true,
    "stateMutability": "view",
    "payable": false,
    
    "inputs": [],
    "outputs": [
      {
        "type": "uint256"
      }
    ]
  },
  {
    "type": "function",
    "name": "TRANCHE_DURATION",
    "constant": true,
    "stateMutability": "view",
    "payable": false,
    
    "inputs": [],
    "outputs": [
      {
        "type": "uint256"
      }
    ]
  },
  {
    "type": "function",
    "name": "WEIGHT_DENOMINATOR",
    "constant": true,
    "stateMutability": "view",
    "payable": false,
    
    "inputs": [],
    "outputs": [
      {
        "type": "uint256"
      }
    ]
  },
  {
    "type": "function",
    "name": "calculateFixedPricePremium",
    "constant": true,
    "stateMutability": "pure",
    "payable": false,
    
    "inputs": [
      {
        "type": "uint256",
        "name": "coverAmount"
      },
      {
        "type": "uint256",
        "name": "period"
      },
      {
        "type": "uint256",
        "name": "fixedPrice"
      },
      {
        "type": "uint256",
        "name": "nxmPerAllocationUnit"
      },
      {
        "type": "uint256",
        "name": "targetPriceDenominator"
      }
    ],
    "outputs": [
      {
        "type": "uint256"
      }
    ]
  },
  {
    "type": "function",
    "name": "calculatePremium",
    "constant": true,
    "stateMutability": "pure",
    "payable": false,
    
    "inputs": [
      {
        "type": "tuple",
        "name": "product",
        "components": [
          {
            "type": "uint16",
            "name": "lastEffectiveWeight"
          },
          {
            "type": "uint8",
            "name": "targetWeight"
          },
          {
            "type": "uint96",
            "name": "targetPrice"
          },
          {
            "type": "uint96",
            "name": "bumpedPrice"
          },
          {
            "type": "uint32",
            "name": "bumpedPriceUpdateTime"
          }
        ]
      },
      {
        "type": "uint256",
        "name": "period"
      },
      {
        "type": "uint256",
        "name": "coverAmount"
      },
      {
        "type": "uint256",
        "name": "initialCapacityUsed"
      },
      {
        "type": "uint256",
        "name": "totalCapacity"
      },
      {
        "type": "uint256",
        "name": "targetPrice"
      },
      {
        "type": "uint256",
        "name": "currentBlockTimestamp"
      },
      {
        "type": "uint256",
        "name": "nxmPerAllocationUnit"
      },
      {
        "type": "uint256",
        "name": "allocationUnitsPerNxm"
      },
      {
        "type": "uint256",
        "name": "targetPriceDenominator"
      }
    ],
    "outputs": [
      {
        "type": "uint256",
        "name": "premium"
      },
      {
        "type": "tuple",
        "components": [
          {
            "type": "uint16",
            "name": "lastEffectiveWeight"
          },
          {
            "type": "uint8",
            "name": "targetWeight"
          },
          {
            "type": "uint96",
            "name": "targetPrice"
          },
          {
            "type": "uint96",
            "name": "bumpedPrice"
          },
          {
            "type": "uint32",
            "name": "bumpedPriceUpdateTime"
          }
        ]
      }
    ]
  },
  {
    "type": "function",
    "name": "calculatePremiumPerYear",
    "constant": true,
    "stateMutability": "pure",
    "payable": false,
    
    "inputs": [
      {
        "type": "uint256",
        "name": "basePrice"
      },
      {
        "type": "uint256",
        "name": "coverAmount"
      },
      {
        "type": "uint256",
        "name": "initialCapacityUsed"
      },
      {
        "type": "uint256",
        "name": "totalCapacity"
      },
      {
        "type": "uint256",
        "name": "nxmPerAllocationUnit"
      },
      {
        "type": "uint256",
        "name": "allocationUnitsPerNxm"
      },
      {
        "type": "uint256",
        "name": "targetPriceDenominator"
      }
    ],
    "outputs": [
      {
        "type": "uint256"
      }
    ]
  },
  {
    "type": "function",
    "name": "calculateSurgePremium",
    "constant": true,
    "stateMutability": "pure",
    "payable": false,
    
    "inputs": [
      {
        "type": "uint256",
        "name": "amountOnSurge"
      },
      {
        "type": "uint256",
        "name": "totalCapacity"
      },
      {
        "type": "uint256",
        "name": "allocationUnitsPerNxm"
      }
    ],
    "outputs": [
      {
        "type": "uint256"
      }
    ]
  },
  {
    "type": "function",
    "name": "changeDependentContractAddress",
    "constant": false,
    "payable": false,
    
    "inputs": [],
    "outputs": []
  },
  {
    "type": "function",
    "name": "changeMasterAddress",
    "constant": false,
    "payable": false,
    
    "inputs": [
      {
        "type": "address",
        "name": "masterAddress"
      }
    ],
    "outputs": []
  },
  {
    "type": "function",
    "name": "coverContract",
    "constant": true,
    "stateMutability": "view",
    "payable": false,
    
    "inputs": [],
    "outputs": [
      {
        "type": "address"
      }
    ]
  },
  {
    "type": "function",
    "name": "getEffectiveWeight",
    "constant": true,
    "stateMutability": "view",
    "payable": false,
    
    "inputs": [
      {
        "type": "uint256",
        "name": "poolId"
      },
      {
        "type": "uint256",
        "name": "productId"
      },
      {
        "type": "uint256",
        "name": "targetWeight"
      },
      {
        "type": "uint256",
        "name": "globalCapacityRatio"
      },
      {
        "type": "uint256",
        "name": "capacityReductionRatio"
      }
    ],
    "outputs": [
      {
        "type": "uint256",
        "name": "effectiveWeight"
      }
    ]
  },
  {
    "type": "function",
    "name": "getPremium",
    "constant": false,
    "payable": false,
    
    "inputs": [
      {
        "type": "uint256",
        "name": "poolId"
      },
      {
        "type": "uint256",
        "name": "productId"
      },
      {
        "type": "uint256",
        "name": "period"
      },
      {
        "type": "uint256",
        "name": "coverAmount"
      },
      {
        "type": "uint256",
        "name": "initialCapacityUsed"
      },
      {
        "type": "uint256",
        "name": "totalCapacity"
      },
      {
        "type": "uint256",
        "name": "globalMinPrice"
      },
      {
        "type": "bool",
        "name": "useFixedPrice"
      },
      {
        "type": "uint256",
        "name": "nxmPerAllocationUnit"
      },
      {
        "type": "uint256",
        "name": "allocationUnitsPerNXM"
      }
    ],
    "outputs": [
      {
        "type": "uint256",
        "name": "premium"
      }
    ]
  },
  {
    "type": "function",
    "name": "getProduct",
    "constant": true,
    "stateMutability": "view",
    "payable": false,
    
    "inputs": [
      {
        "type": "uint256",
        "name": "poolId"
      },
      {
        "type": "uint256",
        "name": "productId"
      }
    ],
    "outputs": [
      {
        "type": "uint256",
        "name": "lastEffectiveWeight"
      },
      {
        "type": "uint256",
        "name": "targetWeight"
      },
      {
        "type": "uint256",
        "name": "targetPrice"
      },
      {
        "type": "uint256",
        "name": "bumpedPrice"
      },
      {
        "type": "uint256",
        "name": "bumpedPriceUpdateTime"
      }
    ]
  },
  {
    "type": "function",
    "name": "getProductTargetWeight",
    "constant": true,
    "stateMutability": "view",
    "payable": false,
    
    "inputs": [
      {
        "type": "uint256",
        "name": "poolId"
      },
      {
        "type": "uint256",
        "name": "productId"
      }
    ],
    "outputs": [
      {
        "type": "uint256"
      }
    ]
  },
  {
    "type": "function",
    "name": "getTotalEffectiveWeight",
    "constant": true,
    "stateMutability": "view",
    "payable": false,
    
    "inputs": [
      {
        "type": "uint256",
        "name": "poolId"
      }
    ],
    "outputs": [
      {
        "type": "uint256"
      }
    ]
  },
  {
    "type": "function",
    "name": "getTotalTargetWeight",
    "constant": true,
    "stateMutability": "view",
    "payable": false,
    
    "inputs": [
      {
        "type": "uint256",
        "name": "poolId"
      }
    ],
    "outputs": [
      {
        "type": "uint256"
      }
    ]
  },
  {
    "type": "function",
    "name": "internalContracts",
    "constant": true,
    "stateMutability": "view",
    "payable": false,
    
    "inputs": [
      {
        "type": "uint256"
      }
    ],
    "outputs": [
      {
        "type": "address"
      }
    ]
  },
  {
    "type": "function",
    "name": "master",
    "constant": true,
    "stateMutability": "view",
    "payable": false,
    
    "inputs": [],
    "outputs": [
      {
        "type": "address"
      }
    ]
  },
  {
    "type": "function",
    "name": "multicall",
    "constant": false,
    "payable": false,
    
    "inputs": [
      {
        "type": "bytes[]",
        "name": "data"
      }
    ],
    "outputs": [
      {
        "type": "bytes[]",
        "name": "results"
      }
    ]
  },
  {
    "type": "function",
    "name": "recalculateEffectiveWeights",
    "constant": false,
    "payable": false,
    
    "inputs": [
      {
        "type": "uint256",
        "name": "poolId"
      },
      {
        "type": "uint256[]",
        "name": "productIds"
      }
    ],
    "outputs": []
  },
  {
    "type": "function",
    "name": "setInitialProducts",
    "constant": false,
    "payable": false,
    
    "inputs": [
      {
        "type": "uint256",
        "name": "poolId"
      },
      {
        "type": "tuple[]",
        "name": "params",
        "components": [
          {
            "type": "uint256",
            "name": "productId"
          },
          {
            "type": "uint8",
            "name": "weight"
          },
          {
            "type": "uint96",
            "name": "initialPrice"
          },
          {
            "type": "uint96",
            "name": "targetPrice"
          }
        ]
      }
    ],
    "outputs": []
  },
  {
    "type": "function",
    "name": "setProducts",
    "constant": false,
    "payable": false,
    
    "inputs": [
      {
        "type": "uint256",
        "name": "poolId"
      },
      {
        "type": "tuple[]",
        "name": "params",
        "components": [
          {
            "type": "uint256",
            "name": "productId"
          },
          {
            "type": "bool",
            "name": "recalculateEffectiveWeight"
          },
          {
            "type": "bool",
            "name": "setTargetWeight"
          },
          {
            "type": "uint8",
            "name": "targetWeight"
          },
          {
            "type": "bool",
            "name": "setTargetPrice"
          },
          {
            "type": "uint96",
            "name": "targetPrice"
          }
        ]
      }
    ],
    "outputs": []
  },
  {
    "type": "function",
    "name": "stakingPoolFactory",
    "constant": true,
    "stateMutability": "view",
    "payable": false,
    
    "inputs": [],
    "outputs": [
      {
        "type": "address"
      }
    ]
  },
  {
    "type": "function",
    "name": "weights",
    "constant": true,
    "stateMutability": "view",
    "payable": false,
    
    "inputs": [
      {
        "type": "uint256"
      }
    ],
    "outputs": [
      {
        "type": "uint32",
        "name": "totalEffectiveWeight"
      },
      {
        "type": "uint32",
        "name": "totalTargetWeight"
      }
    ]
  }
]