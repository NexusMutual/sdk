<!DOCTYPE html>
<html lang='en'>
<head>
  <title>Nexus Mutual addresses</title>
  <link rel='stylesheet' href='//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css'>
  <link rel='icon'
        href='data:image/gif;base64,R0lGODlhEAAQANUwACkpKdDQ0CgoKOfn59na3BEZI1lnYy4uLre5vNbX2QgICKyus+Lj5bGztzg+R1lnYnuAhoOGjUdVU/v7/DM5Q0hWVGCJXoWIj0lWVWCOXbu9wV+NXPz8/Lq8wF+JXbCytjI4QkpXVV+JXq2vszY8RlhnYXl9gzQ6RHp+hOHi5ElVVejo6Onp6f39/ebm5i0tLf///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4zLWMwMTEgNjYuMTQ1NjYxLCAyMDEyLzAyLzA2LTE0OjU2OjI3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpCMjVFNUU4MTNFREIxMUU4QjYxMkJDOTM1NjZFM0MwRCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpCMjVFNUU4MjNFREIxMUU4QjYxMkJDOTM1NjZFM0MwRCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkIyNUU1RTdGM0VEQjExRThCNjEyQkM5MzU2NkUzQzBEIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkIyNUU1RTgwM0VEQjExRThCNjEyQkM5MzU2NkUzQzBEIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEAQAAMAAsAAAAABAAEAAABppABeDwKhqPB4BCEFi5ngMWa/B0rQKClwvGhU0SBE4X5ipuu6OHATEua7stSMZyaZvHDQmmA2tx3VsIERoMJw4pDSgLLW4rBAYiKiQFBSAVGw8JLEUsCSUbFRSUDiEeBgQrZi0LJg0MDhQMGhFsgFx+HRgSH3ZvXRcWGRB+f3ddCAYPC71nXBwECRN2TE5QUlRPVwJCREfeSQpBADs='
        type='image/gif' sizes='16x16'>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      font-size: 12px;
      font-family: monospace;
      background-color: #212529;
    }

    a, a:visited {
      color: #0b94ea;
    }

    a:hover, a:focus {
      color: #52B1EE;
    }

    td {
      line-height: 1.75rem;
    }
  </style>
</head>
<body>

<div class='container mt-5'>
  <div class='row'>
    <div class='col'>
      <table id='data' class='table table-hover table-dark table-striped'></table>
      <div style='display: none' id='warning' class='alert alert-secondary' role='alert'>Failed to fetch version data</div>
    </div>
  </div>
</div>

<script type='text/javascript'>

  const ETHERSCAN = `https://etherscan.io/address`;
  const newRow = cells => `<tr>${cells.join('')}</tr>`;
  const textCell = value => `<td>${value}</td>`;
  const linkCell = (href, text) => `<td><a target='_blank' href='${href}'>${text}</td>`;
  const capFirst = s => s.charAt(0).toUpperCase() + s.slice(1);

  async function load () {

    const table = document.getElementById('data');
    const network = document.location.hostname.indexOf('staging') === -1
      ? 'mainnet'
      : 'kovan';
    const file = `data${network === 'mainnet' ? '' : '-' + network}.json`;
    const data = await fetch(file).then(r => r.json());
    const proxies = ['GV', 'MR', 'NXMASTER', 'PC', 'PS', 'TC', 'GW', 'IC'];

    const rows = data[network].abis
      .filter(({ code }) => !['DAI', 'PRICEORACLE', 'CHAINLINK-DAI-ETH'].includes(code))
      .sort((a, b) => a.contractName < b.contractName ? -1 : 1)
      .map(({ address, code, contractName }) => {
        const isProxy = proxies.includes(code) ? 'Proxy' : '';
        return newRow([
          textCell(`<strong>${code}</strong>`),
          linkCell(`${ETHERSCAN}/${address}`, capFirst(contractName)),
          textCell(`${address}`),
          linkCell(`${ETHERSCAN}/${address}/advanced#tokentxns`, 'ERC20 transfers'),
          linkCell(`${ETHERSCAN}/${address}/advanced#read${isProxy}Contract`, `Read ${isProxy}`),
          linkCell(`${ETHERSCAN}/${address}/advanced#write${isProxy}Contract`, `Write ${isProxy}`),
          linkCell(`${ETHERSCAN}/${address}/advanced#events`, 'Events'),
        ]);
      });

    table.innerHTML = rows.join('');
  }

  load().catch(e => {
    console.error(e);
    document.getElementById('warning').style.display = 'block';
  });

</script>

</body>
</html>
